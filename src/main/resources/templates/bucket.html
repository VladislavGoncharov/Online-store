<!DOCTYPE html>
<html lang="ru" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <meta charset="UTF-8">
    <title>Bucket</title>
</head>
<body>
<div th:insert="~{fragments/menu :: #nav-menu}"></div>
<div th:switch="${bucket.getBucketDetails().isEmpty()}">
    <div th:case="${true}">
        <h3>Your bucket is empty </h3>
    </div>
    <div th:case="${false}">
        <h3>Your bucket</h3>
        <h2>All sum -> <b th:text="${bucket.sum}"></b></h2>
        <table border="2" align="center">
            <tr>
                <td>Title</td>
                <td>Amount</td>
                <td>Price</td>
                <td>Sum</td>
                <td>Option</td>
            </tr>
            <tr th:each="detail : ${bucket.bucketDetails}">
                <td th:text="${detail.title}"></td>
                <td th:text="${detail.amount}"></td>
                <td th:text="${detail.price}"></td>
                <td th:text="${detail.sum}"></td>
                <td><a th:href="@{/bucket/delete-{title}(title=${detail.title})}">Delete</a></td>
            </tr>
            <tr sec:authorize="isAuthenticated()">
                <td colspan="5">
                    <a th:href="@{/orders/new}">Buy</a>
                </td>
            </tr>
            <tr sec:authorize="!isAuthenticated()">
                <td colspan="5">
                    to purchase, you need to <a th:href="@{/login}">Login</a> or <a th:href="@{/registration}">Registration</a>
                </td>
            </tr>
        </table>
    </div>

</div>


</body>
</html>